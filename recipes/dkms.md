# DKMS

The DKMS (Dynamic Kernel Module Support) is convinient method for installing additional drivers
that are outside of kernel tree.

There's awesome documentation about [DKMS](https://wiki.archlinux.org/index.php/Dynamic_Kernel_Module_Support)
on ArchWiki, get familiar with it to understand what and how to use it in general.

To use DKMS you need to have `linux-headers` installed.
This is by default if you use images generated by this repository.

## Install DKMS (arm64)

The first step is to install and configure DKMS:

```bash
sudo apt-get update -y
sudo apt-get install dkms git-core
```

## Install DKMS (armhf)


You have to perform additional steps to prepare `aarch64` compilation environment:

```bash
sudo apt-get update -y
sudo apt-get install -y dkms git-core
sudo apt-get install -y debootstrap binutils-aarch64-linux-gnu
sudo debootstrap --arch=arm64 --variant=minbase --include=gcc bionic /opt/gcc-arm64 http://ports.ubuntu.com/ubuntu-ports/
echo "export CROSS_COMPILE=/opt/gcc-arm64/usr/bin/aarch64-linux-gnu-" | sudo tee -a /etc/dkms/framework.conf
echo "export LD_LIBRARY_PATH=/opt/gcc-arm64/usr/lib/aarch64-linux-gnu/:/opt/gcc-arm64/lib/aarch64-linux-gnu/:\$LD_LIBRARY_PATH" | sudo tee  -a /etc/dkms/framework.conf
```

## Wireguard

Installing Wireguard is very simple with DKMS and makes Wireguard to be auto-updated
after kernel change.

Following the documentation from https://www.wireguard.com/install/ Ubuntu,
visit the wireguard webpage for Debian documentation:

```bash
sudo add-apt-repository ppa:wireguard/wireguard
sudo apt-get install python wireguard
```

## RTL 8812AU (WiFi USB adapter)

The Realtek 8812AU is very popular chipset for USB dongles. The 8812AU is being sold by Pine64, Inc.
as well.

```bash
sudo git clone https://github.com/greearb/rtl8812AU_8821AU_linux.git /usr/src/rtl8812au-4.3.14
sudo dkms build rtl8812au/4.3.14
sudo dkms autoinstall
```

## tn40xx driver (10Gbps PCIe adapter)

```bash
sudo git clone https://github.com/ayufan-rock64/tn40xx-driver /usr/src/tn40xx-001
sudo dkms build tn40xx/001
sudo dkms autoinstall
```

## exfat-nofuse

ExFat is by default available in Debian/Ubuntu repositories, but this uses FUSE (Filesystem in Userspace).
There's a very good linux kernel driver available:

```bash
sudo git clone https://github.com/barrybingo/exfat-nofuse /usr/src/exfat-1.2.8
sudo dkms build exfat/1.2.8
sudo dkms autoinstall
```
